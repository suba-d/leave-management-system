From d29fd92ec5b5869a0e68f9109833401b9a6687cf Mon Sep 17 00:00:00 2001
From: root <root@ip-172-31-15-91.ap-northeast-1.compute.internal>
Date: Wed, 20 Aug 2025 07:20:54 +0000
Subject: [PATCH 1/2] =?UTF-8?q?=E7=BE=8E=E5=8C=96=E5=85=A8=E5=B1=80?=
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

---
 migrations/versions/af3154f625c0_.py          |  24 +
 .../c87e82b48819_initial_migration.py         |  40 +
 temp_admin_fix.txt                            |  41 +
 templates/admin.html                          | 701 ++++++++++++++----
 templates/admin.html.issue                    | 641 ++++++++++++++++
 templates/login.html                          | 365 ++++++++-
 templates/user_records.html                   | 607 +++++++++++++--
 7 files changed, 2180 insertions(+), 239 deletions(-)
 create mode 100644 migrations/versions/af3154f625c0_.py
 create mode 100644 migrations/versions/c87e82b48819_initial_migration.py
 create mode 100644 temp_admin_fix.txt
 create mode 100644 templates/admin.html.issue

diff --git a/migrations/versions/af3154f625c0_.py b/migrations/versions/af3154f625c0_.py
new file mode 100644
index 0000000..cdc2268
--- /dev/null
+++ b/migrations/versions/af3154f625c0_.py
@@ -0,0 +1,24 @@
+"""empty message
+
+Revision ID: af3154f625c0
+Revises: 9d0e455da701, c87e82b48819
+Create Date: 2025-08-20 06:51:05.046284
+
+"""
+from alembic import op
+import sqlalchemy as sa
+
+
+# revision identifiers, used by Alembic.
+revision = 'af3154f625c0'
+down_revision = ('9d0e455da701', 'c87e82b48819')
+branch_labels = None
+depends_on = None
+
+
+def upgrade():
+    pass
+
+
+def downgrade():
+    pass
diff --git a/migrations/versions/c87e82b48819_initial_migration.py b/migrations/versions/c87e82b48819_initial_migration.py
new file mode 100644
index 0000000..ac7ba91
--- /dev/null
+++ b/migrations/versions/c87e82b48819_initial_migration.py
@@ -0,0 +1,40 @@
+"""initial migration
+
+Revision ID: c87e82b48819
+Revises: 
+Create Date: 2025-02-16 14:43:38.024264
+
+"""
+from alembic import op
+import sqlalchemy as sa
+from sqlalchemy.dialects import mysql
+
+# revision identifiers, used by Alembic.
+revision = 'c87e82b48819'
+down_revision = None
+branch_labels = None
+depends_on = None
+
+
+def upgrade():
+    # ### commands auto generated by Alembic - please adjust! ###
+    with op.batch_alter_table('leave_record', schema=None) as batch_op:
+        batch_op.alter_column('user_id',
+               existing_type=mysql.INTEGER(display_width=11),
+               nullable=True)
+        batch_op.drop_constraint('leave_record_ibfk_1', type_='foreignkey')
+        batch_op.create_foreign_key(None, 'user', ['user_id'], ['id'])
+
+    # ### end Alembic commands ###
+
+
+def downgrade():
+    # ### commands auto generated by Alembic - please adjust! ###
+    with op.batch_alter_table('leave_record', schema=None) as batch_op:
+        batch_op.drop_constraint(None, type_='foreignkey')
+        batch_op.create_foreign_key('leave_record_ibfk_1', 'user', ['user_id'], ['id'], ondelete='CASCADE')
+        batch_op.alter_column('user_id',
+               existing_type=mysql.INTEGER(display_width=11),
+               nullable=False)
+
+    # ### end Alembic commands ###
diff --git a/temp_admin_fix.txt b/temp_admin_fix.txt
new file mode 100644
index 0000000..6f4f3cb
--- /dev/null
+++ b/temp_admin_fix.txt
@@ -0,0 +1,41 @@
+        <!-- 最近請假記錄 -->
+        {% if leave_records %}
+        <div class="card recent-records">
+            <h2 class="card-title">
+                <i class="fas fa-clock"></i>
+                最近請假記錄
+            </h2>
+            {% for user_id, records in leave_records.items() %}
+                {% for record in records %}
+                <div class="record-item">
+                    <div class="record-info">
+                        <div class="record-user">
+                            {% for user in users if user.id == user_id %}
+                                {{ user.username }}
+                            {% endfor %}
+                        </div>
+                        <div class="record-details">
+                            {{ record.leave_type }} | {{ record.start_date.strftime('%Y-%m-%d') }} 
+                            {% if record.start_date != record.end_date %}
+                            至 {{ record.end_date.strftime('%Y-%m-%d') }}
+                            {% endif %}
+                            | {{ record.days }} 天
+                            {% if record.reason %}
+                            | {{ record.reason }}
+                            {% endif %}
+                        </div>
+                    </div>
+                    <div class="record-actions">
+                        <form action="{{ url_for('leave.delete_leave', leave_id=record.id) }}" method="POST" style="display:inline;" 
+                              onsubmit="return confirm('確定要刪除這筆請假紀錄嗎？')">
+                            <button type="submit" class="btn btn-danger btn-sm">
+                                <i class="fas fa-trash"></i>
+                                刪除
+                            </button>
+                        </form>
+                    </div>
+                </div>
+                {% endfor %}
+            {% endfor %}
+        </div>
+        {% endif %}
diff --git a/templates/admin.html b/templates/admin.html
index b61482e..dbb9a0e 100644
--- a/templates/admin.html
+++ b/templates/admin.html
@@ -3,184 +3,593 @@
 <head>
     <meta charset="UTF-8">
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
-    <title>用戶管理</title>
-    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
+    <title>管理員儀表板 | 智能管理系統</title>
+    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
+    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
     <style>
+        :root {
+            --primary-bg: linear-gradient(135deg, #0c0c0c 0%, #1a1a1a 50%, #0f0f23 100%);
+            --secondary-bg: rgba(255, 255, 255, 0.05);
+            --glass-bg: rgba(255, 255, 255, 0.08);
+            --border-color: rgba(255, 255, 255, 0.1);
+            --text-primary: #ffffff;
+            --text-secondary: #b0b0b0;
+            --accent-color: #00d4ff;
+            --accent-gradient: linear-gradient(135deg, #00d4ff 0%, #0099cc 100%);
+            --success-color: #00ff88;
+            --warning-color: #ffaa00;
+            --danger-color: #ff4757;
+            --card-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
+            --card-border: 1px solid rgba(255, 255, 255, 0.1);
+        }
+
+        * {
+            margin: 0;
+            padding: 0;
+            box-sizing: border-box;
+        }
+
         body {
-            font-family: Arial, sans-serif;
-            background-color: #f9f9f9;
+            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
+            background: var(--primary-bg);
+            color: var(--text-primary);
+            min-height: 100vh;
+            line-height: 1.6;
         }
-        header {
-            background-color: #4CAF50;
-            color: white;
-            text-align: center;
-            padding: 15px 0;
-            margin-bottom: 20px;
+
+        /* 動畫背景 */
+        body::before {
+            content: '';
+            position: fixed;
+            top: 0;
+            left: 0;
+            width: 100%;
+            height: 100%;
+            background: 
+                radial-gradient(circle at 20% 80%, rgba(120, 119, 198, 0.3) 0%, transparent 50%),
+                radial-gradient(circle at 80% 20%, rgba(255, 119, 198, 0.3) 0%, transparent 50%),
+                radial-gradient(circle at 40% 40%, rgba(120, 219, 255, 0.3) 0%, transparent 50%);
+            animation: rotate 20s linear infinite;
+            pointer-events: none;
+            z-index: -1;
         }
-        h1 {
-            margin: 0;
-            font-size: 24px;
+
+        @keyframes rotate {
+            0% { transform: rotate(0deg); }
+            100% { transform: rotate(360deg); }
+        }
+
+        .header {
+            background: var(--glass-bg);
+            backdrop-filter: blur(20px);
+            border-bottom: var(--card-border);
+            padding: 1.5rem 0;
+            position: sticky;
+            top: 0;
+            z-index: 100;
         }
+
+        .header-container {
+            max-width: 1200px;
+            margin: 0 auto;
+            padding: 0 2rem;
+            display: flex;
+            justify-content: space-between;
+            align-items: center;
+        }
+
+        .header-title {
+            font-size: 1.5rem;
+            font-weight: 700;
+            background: var(--accent-gradient);
+            -webkit-background-clip: text;
+            -webkit-text-fill-color: transparent;
+            background-clip: text;
+        }
+
+        .header-actions {
+            display: flex;
+            gap: 1rem;
+            align-items: center;
+        }
+
         .container {
-            max-width: 90%;
+            max-width: 1200px;
             margin: 0 auto;
+            padding: 2rem;
         }
-        .record-list {
-            display: none;
-            margin-top: 15px;
+
+        .dashboard-grid {
+            display: grid;
+            grid-template-columns: 1fr 2fr;
+            gap: 2rem;
+            margin-bottom: 2rem;
         }
-        .record-list ul {
-            padding: 0;
+
+        .card {
+            background: var(--glass-bg);
+            backdrop-filter: blur(20px);
+            border: var(--card-border);
+            border-radius: 20px;
+            padding: 2rem;
+            box-shadow: var(--card-shadow);
+            position: relative;
+            overflow: hidden;
         }
-        .list-group-item {
+
+        .card::before {
+            content: '';
+            position: absolute;
+            top: 0;
+            left: 0;
+            right: 0;
+            height: 4px;
+            background: var(--accent-gradient);
+            border-radius: 20px 20px 0 0;
+        }
+
+        .card-title {
+            font-size: 1.25rem;
+            font-weight: 600;
+            margin-bottom: 1.5rem;
+            color: var(--text-primary);
             display: flex;
-            justify-content: space-between;
             align-items: center;
+            gap: 0.5rem;
         }
-        .form-inline .form-control {
-            width: auto;
+
+        .form-group {
+            margin-bottom: 1rem;
+        }
+
+        .form-label {
+            display: block;
+            font-size: 0.9rem;
+            font-weight: 500;
+            color: var(--text-primary);
+            margin-bottom: 0.5rem;
+        }
+
+        .form-control {
+            width: 100%;
+            padding: 0.75rem 1rem;
+            background: var(--secondary-bg);
+            border: 1px solid var(--border-color);
+            border-radius: 12px;
+            color: var(--text-primary);
+            font-size: 0.95rem;
+            transition: all 0.3s ease;
+        }
+
+        .form-control:focus {
+            outline: none;
+            border-color: var(--accent-color);
+            box-shadow: 0 0 0 3px rgba(0, 212, 255, 0.1);
+            background: rgba(255, 255, 255, 0.1);
+        }
+
+        .btn {
+            padding: 0.75rem 1.5rem;
+            border: none;
+            border-radius: 12px;
+            font-size: 0.9rem;
+            font-weight: 500;
+            cursor: pointer;
+            transition: all 0.3s ease;
+            text-decoration: none;
             display: inline-block;
+            text-align: center;
         }
-        .record-list img {
-            max-width: 100px;  /* 限制圖片最大寬度 */
-            height: auto;      /* 保持圖片比例 */
-            margin: 5px;      /* 添加一些邊距 */
-            cursor: pointer;   /* 滑鼠移過時顯示手型指標 */
+
+        .btn-primary {
+            background: var(--accent-gradient);
+            color: white;
         }
-    </style>
-    <script>
-        function toggleRecords(userId) {
-            const recordList = document.getElementById('records-' + userId);
-            recordList.style.display = (recordList.style.display === 'none' || !recordList.style.display) ? 'block' : 'none';
+
+        .btn-primary:hover {
+            transform: translateY(-2px);
+            box-shadow: 0 8px 25px rgba(0, 212, 255, 0.3);
         }
 
-        function validateLeaveDays(input) {
-            const value = parseFloat(input.value);
-            if (!Number.isNaN(value) && (value % 1 === 0 || value % 1 === 0.5)) {
-                input.setCustomValidity('');
-            } else {
-                input.setCustomValidity('請輸入整數或以 .5 結尾的小數');
+        .btn-secondary {
+            background: var(--secondary-bg);
+            color: var(--text-primary);
+            border: 1px solid var(--border-color);
+        }
+
+        .btn-secondary:hover {
+            background: rgba(255, 255, 255, 0.1);
+            color: var(--text-primary);
+            text-decoration: none;
+        }
+
+        .btn-danger {
+            background: linear-gradient(135deg, var(--danger-color) 0%, #c44569 100%);
+            color: white;
+        }
+
+        .btn-danger:hover {
+            transform: translateY(-2px);
+            box-shadow: 0 8px 25px rgba(255, 71, 87, 0.3);
+        }
+
+        .btn-sm {
+            padding: 0.5rem 1rem;
+            font-size: 0.8rem;
+        }
+
+        .table {
+            width: 100%;
+            border-collapse: collapse;
+            margin-top: 1rem;
+            color: var(--text-primary);
+        }
+
+        .table th,
+        .table td {
+            padding: 1rem;
+            text-align: left;
+            border-bottom: 1px solid var(--border-color);
+            vertical-align: middle;
+        }
+
+        .table th {
+            font-weight: 600;
+            color: var(--accent-color);
+            background: rgba(0, 212, 255, 0.1);
+        }
+
+        .table tr:hover {
+            background: rgba(255, 255, 255, 0.05);
+        }
+
+        .user-stats {
+            display: grid;
+            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
+            gap: 1rem;
+            margin-top: 1rem;
+        }
+
+        .stat-item {
+            text-align: center;
+            padding: 1rem;
+            background: var(--secondary-bg);
+            border-radius: 12px;
+            border: 1px solid var(--border-color);
+        }
+
+        .stat-value {
+            font-size: 1.5rem;
+            font-weight: 700;
+            color: var(--accent-color);
+        }
+
+        .stat-label {
+            font-size: 0.8rem;
+            color: var(--text-secondary);
+            margin-top: 0.25rem;
+        }
+
+        .alert {
+            padding: 1rem;
+            border-radius: 12px;
+            margin-bottom: 1rem;
+            border: none;
+        }
+
+        .alert-success {
+            background: rgba(0, 255, 136, 0.15);
+            border: 1px solid rgba(0, 255, 136, 0.3);
+            color: #c8e6c9;
+        }
+
+        .alert-danger {
+            background: rgba(255, 71, 87, 0.15);
+            border: 1px solid rgba(255, 71, 87, 0.3);
+            color: #ffcdd2;
+        }
+
+        .alert-warning {
+            background: rgba(255, 170, 0, 0.15);
+            border: 1px solid rgba(255, 170, 0, 0.3);
+            color: #ffe0b2;
+        }
+
+        .alert-info {
+            background: rgba(0, 212, 255, 0.15);
+            border: 1px solid rgba(0, 212, 255, 0.3);
+            color: #b3e5fc;
+        }
+
+        /* 編輯表單樣式 */
+        .edit-form {
+            background: var(--secondary-bg);
+            padding: 1.5rem;
+            border-radius: 12px;
+            border: 1px solid var(--border-color);
+            margin-top: 1rem;
+        }
+
+        .edit-form .row {
+            display: grid;
+            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
+            gap: 1rem;
+            margin-bottom: 1rem;
+        }
+
+        /* 響應式設計 */
+        @media (max-width: 1024px) {
+            .dashboard-grid {
+                grid-template-columns: 1fr;
+            }
+            
+            .header-container {
+                padding: 0 1rem;
+            }
+            
+            .container {
+                padding: 1rem;
             }
         }
 
-        // 添加圖片點擊放大功能
-        function openImageInNewTab(url) {
-            window.open(url, '_blank');
+        @media (max-width: 768px) {
+            .table {
+                font-size: 0.9rem;
+            }
+            
+            .table th,
+            .table td {
+                padding: 0.75rem 0.5rem;
+            }
+            
+            .btn {
+                padding: 0.5rem 1rem;
+                font-size: 0.85rem;
+            }
         }
-    </script>
+    </style>
 </head>
 <body>
-    <header>
-        <h1>用戶管理</h1>
+    <header class="header">
+        <div class="header-container">
+            <h1 class="header-title">
+                <i class="fas fa-users-cog"></i>
+                管理員儀表板
+            </h1>
+            <div class="header-actions">
+                <a href="{{ url_for('auth.logout') }}" class="btn btn-secondary btn-sm">
+                    <i class="fas fa-sign-out-alt"></i>
+                    登出
+                </a>
+            </div>
+        </div>
     </header>
+
     <div class="container">
-        <!-- 顯示 Flash 消息 -->
         {% with messages = get_flashed_messages(with_categories=true) %}
-            {% if messages %}
-                <div class="alert alert-dismissible fade show" role="alert">
-                    {% for category, message in messages %}
-                        <div class="alert alert-{{ category }}">{{ message }}</div>
-                    {% endfor %}
-                    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
-                        <span aria-hidden="true">&times;</span>
+        {% if messages %}
+            {% for category, message in messages %}
+            <div class="alert alert-{{ 'danger' if category == 'danger' else category }}">
+                <i class="fas fa-{{ 'exclamation-circle' if category == 'danger' else 'check-circle' }}"></i>
+                {{ message }}
+            </div>
+            {% endfor %}
+        {% endif %}
+        {% endwith %}
+
+        <div class="dashboard-grid">
+            <!-- 新增用戶卡片 -->
+            <div class="card">
+                <h2 class="card-title">
+                    <i class="fas fa-user-plus"></i>
+                    新增用戶
+                </h2>
+                <form action="{{ url_for('admin.add_user') }}" method="POST" class="mb-4">
+                    <div class="form-group">
+                        <label for="username" class="form-label">用戶名</label>
+                        <input type="text" class="form-control" id="username" name="username" placeholder="請輸入用戶名" required>
+                    </div>
+                    <div class="form-group">
+                        <label for="password" class="form-label">密碼</label>
+                        <input type="password" class="form-control" id="password" name="password" placeholder="請輸入密碼" required>
+                    </div>
+                    <button type="submit" class="btn btn-primary" style="width: 100%;">
+                        <i class="fas fa-plus"></i>
+                        新增用戶
                     </button>
+                </form>
+            </div>
+
+            <!-- 統計卡片 -->
+            <div class="card">
+                <h2 class="card-title">
+                    <i class="fas fa-chart-bar"></i>
+                    系統統計
+                </h2>
+                <div class="user-stats">
+                    <div class="stat-item">
+                        <div class="stat-value">{{ users|length }}</div>
+                        <div class="stat-label">總用戶數</div>
+                    </div>
+                    <div class="stat-item">
+                        <div class="stat-value">{{ leave_records|length if leave_records else 0 }}</div>
+                        <div class="stat-label">請假記錄</div>
+                    </div>
+                    <div class="stat-item">
+                        <div class="stat-value">{{ (users|selectattr('vacation_days', 'lt', 5)|list)|length }}</div>
+                        <div class="stat-label">年假不足</div>
+                    </div>
+                    <div class="stat-item">
+                        <div class="stat-value">{{ (users|selectattr('sick_days', 'lt', 3)|list)|length }}</div>
+                        <div class="stat-label">病假不足</div>
+                    </div>
                 </div>
+            </div>
+        </div>
+
+        <!-- 用戶管理列表 -->
+        <div class="card">
+            <h2 class="card-title">
+                <i class="fas fa-users"></i>
+                用戶管理
+            </h2>
+            {% if users %}
+            <table class="table">
+                <thead>
+                    <tr>
+                        <th>用戶名</th>
+                        <th>年假</th>
+                        <th>病假</th>
+                        <th>事假</th>
+                        <th>生理假</th>
+                        <th>家庭照顧假</th>
+                        <th>喪假</th>
+                        <th>操作</th>
+                    </tr>
+                </thead>
+                <tbody>
+                    {% for user in users %}
+                    <tr>
+                        <td>
+                            <strong>{{ user.username }}</strong>
+                        </td>
+                        <td>{{ user.vacation_days }}</td>
+                        <td>{{ user.sick_days }}</td>
+                        <td>{{ user.personal_days }}</td>
+                        <td>{{ user.menstrual_days }}</td>
+                        <td>{{ user.family_care_days }}</td>
+                        <td>{{ user.compassionate_days }}</td>
+                        <td>
+                            <div style="display: flex; gap: 0.5rem; flex-wrap: wrap;">
+                                <a href="{{ url_for('leave.user_records', user_id=user.id) }}" class="btn btn-primary btn-sm">
+                                    <i class="fas fa-eye"></i>
+                                    查看
+                                </a>
+                                <button type="button" class="btn btn-secondary btn-sm" onclick="toggleEditForm({{ user.id }})">
+                                    <i class="fas fa-edit"></i>
+                                    編輯
+                                </button>
+                                <button type="button" class="btn btn-danger btn-sm" onclick="confirmDelete({{ user.id }}, '{{ user.username }}')">
+                                    <i class="fas fa-trash"></i>
+                                    刪除
+                                </button>
+                            </div>
+                        </td>
+                    </tr>
+                    <!-- 編輯表單（隱藏） -->
+                    <tr id="edit-{{ user.id }}" style="display: none;">
+                        <td colspan="8">
+                            <div class="edit-form">
+                                <h4 style="margin-bottom: 1rem; color: var(--text-primary);">
+                                    <i class="fas fa-edit"></i>
+                                    編輯 {{ user.username }} 的假期天數
+                                </h4>
+                                <form action="{{ url_for('admin.update_user', user_id=user.id) }}" method="POST">
+                                    <div class="row">
+                                        <div>
+                                            <label class="form-label">年假</label>
+                                            <input type="number" class="form-control" name="annual_leave" value="{{ user.vacation_days }}" step="0.5" min="0">
+                                        </div>
+                                        <div>
+                                            <label class="form-label">病假</label>
+                                            <input type="number" class="form-control" name="sick_leave" value="{{ user.sick_days }}" step="0.5" min="0">
+                                        </div>
+                                        <div>
+                                            <label class="form-label">事假</label>
+                                            <input type="number" class="form-control" name="personal_leave" value="{{ user.personal_days }}" step="0.5" min="0">
+                                        </div>
+                                        <div>
+                                            <label class="form-label">生理假</label>
+                                            <input type="number" class="form-control" name="menstrual_leave" value="{{ user.menstrual_days }}" step="0.5" min="0">
+                                        </div>
+                                        <div>
+                                            <label class="form-label">家庭照顧假</label>
+                                            <input type="number" class="form-control" name="family_care_leave" value="{{ user.family_care_days }}" step="0.5" min="0">
+                                        </div>
+                                        <div>
+                                            <label class="form-label">喪假</label>
+                                            <input type="number" class="form-control" name="compassionate_leave" value="{{ user.compassionate_days }}" step="0.5" min="0">
+                                        </div>
+                                    </div>
+                                    <div style="display: flex; gap: 1rem; margin-top: 1rem;">
+                                        <button type="submit" class="btn btn-primary">
+                                            <i class="fas fa-save"></i>
+                                            保存更改
+                                        </button>
+                                        <button type="button" class="btn btn-secondary" onclick="toggleEditForm({{ user.id }})">
+                                            <i class="fas fa-times"></i>
+                                            取消
+                                        </button>
+                                    </div>
+                                </form>
+                            </div>
+                        </td>
+                    </tr>
+                    {% endfor %}
+                </tbody>
+            </table>
+            {% else %}
+            <div style="text-align: center; color: var(--text-secondary); padding: 3rem;">
+                <i class="fas fa-user-slash" style="font-size: 3rem; margin-bottom: 1rem; opacity: 0.5;"></i>
+                <h3>尚無用戶資料</h3>
+                <p>系統中還沒有任何用戶</p>
+            </div>
             {% endif %}
-        {% endwith %}
+        </div>
+    </div>
 
-        <!-- 新增用戶表單 -->
-        <form action="{{ url_for('add_user') }}" method="POST" class="mb-4">
-            <div class="form-row">
-                <div class="col-md-5">
-                    <input type="text" class="form-control" id="username" name="username" placeholder="用戶名" required>
-                </div>
-                <div class="col-md-5">
-                    <input type="password" class="form-control" id="password" name="password" placeholder="密碼" required>
-                </div>
-                <div class="col-md-2">
-                    <button type="submit" class="btn btn-primary btn-block">新增用戶</button>
-                </div>
+    <!-- 刪除確認模態框 -->
+    <div id="deleteModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 1000; align-items: center; justify-content: center;">
+        <div style="background: var(--glass-bg); backdrop-filter: blur(20px); border: var(--card-border); border-radius: 20px; padding: 2rem; max-width: 400px; text-align: center;">
+            <h3 style="margin-bottom: 1rem; color: var(--danger-color);">
+                <i class="fas fa-exclamation-triangle"></i>
+                確認刪除
+            </h3>
+            <p style="margin-bottom: 2rem; color: var(--text-secondary);">
+                確定要刪除用戶 <strong id="deleteUsername"></strong> 嗎？此操作無法復原。
+            </p>
+            <div style="display: flex; gap: 1rem; justify-content: center;">
+                <button onclick="closeDeleteModal()" class="btn btn-secondary">取消</button>
+                <form id="deleteForm" method="POST" style="display: inline;">
+                    <button type="submit" class="btn btn-danger">確認刪除</button>
+                </form>
             </div>
-        </form>
-
-        <!-- 用戶管理表格 -->
-        <table class="table table-bordered table-hover">
-            <thead class="thead-light">
-                <tr>
-                    <th>用戶名</th>
-                    <th>年假</th>
-                    <th>病假</th>
-                    <th>事假</th>
-                    <th>生理假</th>
-                    <th>家庭照顧假</th>
-                    <th>同情假</th>
-                    <th>操作</th>
-                </tr>
-            </thead>
-            <tbody>
-                {% for user in users %}
-                <tr>
-                    <td>
-                        <a href="{{ url_for('user_records', user_id=user.id) }}">
-                            {{ user.username }}
-                        </a>
-                    </td>
-                    <form action="/update_user/{{ user.id }}" method="POST">
-                        <td><input type="number" step="0.5" class="form-control" name="annual_leave" value="{{ user.vacation_days }}" required></td>
-                        <td><input type="number" step="0.5" class="form-control" name="sick_leave" value="{{ user.sick_days }}" required></td>
-                        <td><input type="number" step="0.5" class="form-control" name="personal_leave" value="{{ user.personal_days }}" required></td>
-                        <td><input type="number" step="0.5" class="form-control" name="menstrual_leave" value="{{ user.menstrual_days }}" required></td>
-                        <td><input type="number" step="0.5" class="form-control" name="family_care_leave" value="{{ user.family_care_days }}" required></td>
-                        <td><input type="number" step="0.5" class="form-control" name="compassionate_leave" value="{{ user.compassionate_days }}" required></td>
-                        <td><button class="btn btn-success btn-sm" type="submit">更新</button></td>
-                    </form>
-                    <td>
-                        <button class="btn btn-info btn-sm" onclick="toggleRecords('{{ user.id }}')">展開紀錄</button>
-                        <form action="/delete_user/{{ user.id }}" method="POST" style="display:inline;">
-                            <button class="btn btn-danger btn-sm" type="submit" onclick="return confirm('確認刪除此用戶？')">刪除</button>
-                        </form>
-                    </td>
-                </tr>
-                <tr>
-                    <td colspan="8">
-                        <div id="records-{{ user.id }}" class="record-list">
-                            {% if leave_records[user.id] %}
-                            <ul class="list-group">
-                                {% for record in leave_records[user.id][-5:] %}
-                                <li class="list-group-item">
-                                    {{ record.leave_type }}: {{ record.start_date }} ~ {{ record.end_date }}
-                                    {% if record.reason %}
-                                    ({{ record.reason }})
-                                    {% endif %}
-                                    {% if record.receipt_url %}
-                                    <a href="{{ record.receipt_url }}" 
-                                       target="_blank">
-                                       查看證明圖片
-                                    </a>
-                                    {% endif %}
-                                    <form action="{{ url_for('delete_leave', leave_id=record.id) }}" method="POST" style="display:inline;">
-                                        <button type="submit" class="btn btn-danger btn-sm" onclick="return confirm('確認刪除此請假紀錄？')">刪除</button>
-                                    </form>
-                                </li>
-                                {% endfor %}
-                            </ul>
-                            {% else %}
-                            <div class="alert alert-info mt-2">無請假紀錄</div>
-                            {% endif %}
-                        </div>
-                    </td>
-                </tr>
-                {% endfor %}
-            </tbody>
-        </table>
-
-        <!-- 登出 -->
-        <div class="text-right">
-            <a href="{{ url_for('logout') }}" class="btn btn-secondary">登出</a>
         </div>
     </div>
-    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
-    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
-    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
+
+    <script>
+        function toggleEditForm(userId) {
+            const editRow = document.getElementById('edit-' + userId);
+            if (editRow.style.display === 'none') {
+                editRow.style.display = 'table-row';
+            } else {
+                editRow.style.display = 'none';
+            }
+        }
+
+        function confirmDelete(userId, username) {
+            document.getElementById('deleteUsername').textContent = username;
+            document.getElementById('deleteForm').action = '{{ url_for("admin.delete_user", user_id=0) }}'.replace('0', userId);
+            document.getElementById('deleteModal').style.display = 'flex';
+        }
+
+        function closeDeleteModal() {
+            document.getElementById('deleteModal').style.display = 'none';
+        }
+
+        // 點擊模態框外部關閉
+        document.getElementById('deleteModal').addEventListener('click', function(e) {
+            if (e.target === this) {
+                closeDeleteModal();
+            }
+        });
+
+        // ESC 鍵關閉模態框
+        document.addEventListener('keydown', function(e) {
+            if (e.key === 'Escape') {
+                closeDeleteModal();
+            }
+        });
+    </script>
 </body>
-</html>
\ No newline at end of file
+</html>
diff --git a/templates/admin.html.issue b/templates/admin.html.issue
new file mode 100644
index 0000000..5a77884
--- /dev/null
+++ b/templates/admin.html.issue
@@ -0,0 +1,641 @@
+<!DOCTYPE html>
+<html lang="zh-TW">
+<head>
+    <meta charset="UTF-8">
+    <meta name="viewport" content="width=device-width, initial-scale=1.0">
+    <title>管理員儀表板 | 智能管理系統</title>
+    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
+    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
+    <style>
+        :root {
+            --primary-bg: linear-gradient(135deg, #0c0c0c 0%, #1a1a1a 50%, #0f0f23 100%);
+            --secondary-bg: rgba(255, 255, 255, 0.05);
+            --glass-bg: rgba(255, 255, 255, 0.08);
+            --border-color: rgba(255, 255, 255, 0.1);
+            --text-primary: #ffffff;
+            --text-secondary: #b0b0b0;
+            --accent-color: #00d4ff;
+            --accent-gradient: linear-gradient(135deg, #00d4ff 0%, #0099cc 100%);
+            --success-color: #00ff88;
+            --warning-color: #ffaa00;
+            --danger-color: #ff4757;
+            --card-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
+            --card-border: 1px solid rgba(255, 255, 255, 0.1);
+        }
+
+        * {
+            margin: 0;
+            padding: 0;
+            box-sizing: border-box;
+        }
+
+        body {
+            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
+            background: var(--primary-bg);
+            color: var(--text-primary);
+            min-height: 100vh;
+            line-height: 1.6;
+        }
+
+        /* 動畫背景 */
+        body::before {
+            content: '';
+            position: fixed;
+            top: 0;
+            left: 0;
+            width: 100%;
+            height: 100%;
+            background: 
+                radial-gradient(circle at 20% 80%, rgba(120, 119, 198, 0.3) 0%, transparent 50%),
+                radial-gradient(circle at 80% 20%, rgba(255, 119, 198, 0.3) 0%, transparent 50%),
+                radial-gradient(circle at 40% 40%, rgba(120, 219, 255, 0.3) 0%, transparent 50%);
+            animation: rotate 20s linear infinite;
+            pointer-events: none;
+            z-index: -1;
+        }
+
+        @keyframes rotate {
+            0% { transform: rotate(0deg); }
+            100% { transform: rotate(360deg); }
+        }
+
+        .header {
+            background: var(--glass-bg);
+            backdrop-filter: blur(20px);
+            border-bottom: var(--card-border);
+            padding: 1.5rem 0;
+            position: sticky;
+            top: 0;
+            z-index: 100;
+        }
+
+        .header-container {
+            max-width: 1200px;
+            margin: 0 auto;
+            padding: 0 2rem;
+            display: flex;
+            justify-content: space-between;
+            align-items: center;
+        }
+
+        .header-title {
+            font-size: 1.5rem;
+            font-weight: 700;
+            background: var(--accent-gradient);
+            -webkit-background-clip: text;
+            -webkit-text-fill-color: transparent;
+            background-clip: text;
+        }
+
+        .header-actions {
+            display: flex;
+            gap: 1rem;
+            align-items: center;
+        }
+
+        .container {
+            max-width: 1200px;
+            margin: 0 auto;
+            padding: 2rem;
+        }
+
+        .dashboard-grid {
+            display: grid;
+            grid-template-columns: 1fr 2fr;
+            gap: 2rem;
+            margin-bottom: 2rem;
+        }
+
+        .card {
+            background: var(--glass-bg);
+            backdrop-filter: blur(20px);
+            border: var(--card-border);
+            border-radius: 20px;
+            padding: 2rem;
+            box-shadow: var(--card-shadow);
+            position: relative;
+            overflow: hidden;
+        }
+
+        .card::before {
+            content: '';
+            position: absolute;
+            top: 0;
+            left: 0;
+            right: 0;
+            height: 4px;
+            background: var(--accent-gradient);
+            border-radius: 20px 20px 0 0;
+        }
+
+        .card-title {
+            font-size: 1.25rem;
+            font-weight: 600;
+            margin-bottom: 1.5rem;
+            color: var(--text-primary);
+            display: flex;
+            align-items: center;
+            gap: 0.5rem;
+        }
+
+        .form-group {
+            margin-bottom: 1rem;
+        }
+
+        .form-label {
+            display: block;
+            font-size: 0.9rem;
+            font-weight: 500;
+            color: var(--text-primary);
+            margin-bottom: 0.5rem;
+        }
+
+        .form-input {
+            width: 100%;
+            padding: 0.75rem 1rem;
+            background: var(--secondary-bg);
+            border: 1px solid var(--border-color);
+            border-radius: 12px;
+            color: var(--text-primary);
+            font-size: 0.95rem;
+            transition: all 0.3s ease;
+        }
+
+        .form-input:focus {
+            outline: none;
+            border-color: var(--accent-color);
+            box-shadow: 0 0 0 3px rgba(0, 212, 255, 0.1);
+        }
+
+        .btn {
+            padding: 0.75rem 1.5rem;
+            border: none;
+            border-radius: 12px;
+            font-size: 0.9rem;
+            font-weight: 500;
+            cursor: pointer;
+            transition: all 0.3s ease;
+            text-decoration: none;
+            display: inline-block;
+            text-align: center;
+        }
+
+        .btn-primary {
+            background: var(--accent-gradient);
+            color: white;
+        }
+
+        .btn-primary:hover {
+            transform: translateY(-2px);
+            box-shadow: 0 8px 25px rgba(0, 212, 255, 0.3);
+        }
+
+        .btn-secondary {
+            background: var(--secondary-bg);
+            color: var(--text-primary);
+            border: 1px solid var(--border-color);
+        }
+
+        .btn-secondary:hover {
+            background: rgba(255, 255, 255, 0.1);
+        }
+
+        .btn-danger {
+            background: linear-gradient(135deg, var(--danger-color) 0%, #c44569 100%);
+            color: white;
+        }
+
+        .btn-danger:hover {
+            transform: translateY(-2px);
+            box-shadow: 0 8px 25px rgba(255, 71, 87, 0.3);
+        }
+
+        .btn-sm {
+            padding: 0.5rem 1rem;
+            font-size: 0.8rem;
+        }
+
+        .users-table {
+            width: 100%;
+            border-collapse: collapse;
+            margin-top: 1rem;
+        }
+
+        .users-table th,
+        .users-table td {
+            padding: 1rem;
+            text-align: left;
+            border-bottom: 1px solid var(--border-color);
+        }
+
+        .users-table th {
+            font-weight: 600;
+            color: var(--accent-color);
+            background: rgba(0, 212, 255, 0.1);
+        }
+
+        .users-table tr:hover {
+            background: rgba(255, 255, 255, 0.05);
+        }
+
+        .user-stats {
+            display: grid;
+            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
+            gap: 1rem;
+            margin-top: 1rem;
+        }
+
+        .stat-item {
+            text-align: center;
+            padding: 1rem;
+            background: var(--secondary-bg);
+            border-radius: 12px;
+            border: 1px solid var(--border-color);
+        }
+
+        .stat-value {
+            font-size: 1.5rem;
+            font-weight: 700;
+            color: var(--accent-color);
+        }
+
+        .stat-label {
+            font-size: 0.8rem;
+            color: var(--text-secondary);
+            margin-top: 0.25rem;
+        }
+
+        .recent-records {
+            margin-top: 2rem;
+        }
+
+        .record-item {
+            display: flex;
+            justify-content: space-between;
+            align-items: center;
+            padding: 1rem;
+            margin-bottom: 0.5rem;
+            background: var(--secondary-bg);
+            border-radius: 12px;
+            border: 1px solid var(--border-color);
+            transition: all 0.3s ease;
+        }
+
+        .record-item:hover {
+            background: rgba(255, 255, 255, 0.1);
+            transform: translateY(-2px);
+        }
+
+        .record-info {
+            flex: 1;
+        }
+
+        .record-user {
+            font-weight: 600;
+            color: var(--text-primary);
+        }
+
+        .record-details {
+            font-size: 0.9rem;
+            color: var(--text-secondary);
+            margin-top: 0.25rem;
+        }
+
+        .record-actions {
+            display: flex;
+            gap: 0.5rem;
+        }
+
+        .status-badge {
+            padding: 0.25rem 0.75rem;
+            border-radius: 20px;
+            font-size: 0.8rem;
+            font-weight: 500;
+            text-transform: uppercase;
+        }
+
+        .status-approved {
+            background: rgba(0, 255, 136, 0.2);
+            color: var(--success-color);
+            border: 1px solid rgba(0, 255, 136, 0.3);
+        }
+
+        .status-pending {
+            background: rgba(255, 170, 0, 0.2);
+            color: var(--warning-color);
+            border: 1px solid rgba(255, 170, 0, 0.3);
+        }
+
+        .alert {
+            padding: 1rem;
+            border-radius: 12px;
+            margin-bottom: 1rem;
+            border: none;
+        }
+
+        .alert-success {
+            background: rgba(0, 255, 136, 0.15);
+            border: 1px solid rgba(0, 255, 136, 0.3);
+            color: #c8e6c9;
+        }
+
+        .alert-danger {
+            background: rgba(255, 71, 87, 0.15);
+            border: 1px solid rgba(255, 71, 87, 0.3);
+            color: #ffcdd2;
+        }
+
+        /* 響應式設計 */
+        @media (max-width: 1024px) {
+            .dashboard-grid {
+                grid-template-columns: 1fr;
+            }
+            
+            .header-container {
+                padding: 0 1rem;
+            }
+            
+            .container {
+                padding: 1rem;
+            }
+        }
+
+        @media (max-width: 768px) {
+            .users-table {
+                font-size: 0.9rem;
+            }
+            
+            .users-table th,
+            .users-table td {
+                padding: 0.75rem 0.5rem;
+            }
+            
+            .btn {
+                padding: 0.5rem 1rem;
+                font-size: 0.85rem;
+            }
+        }
+    </style>
+</head>
+<body>
+    <header class="header">
+        <div class="header-container">
+            <h1 class="header-title">
+                <i class="fas fa-users-cog"></i>
+                管理員儀表板
+            </h1>
+            <div class="header-actions">
+                <a href="{{ url_for('auth.logout') }}" class="btn btn-secondary btn-sm">
+                    <i class="fas fa-sign-out-alt"></i>
+                    登出
+                </a>
+            </div>
+        </div>
+    </header>
+
+    <div class="container">
+        {% with messages = get_flashed_messages(with_categories=true) %}
+        {% if messages %}
+            {% for category, message in messages %}
+            <div class="alert alert-{{ 'danger' if category == 'danger' else category }}">
+                <i class="fas fa-{{ 'exclamation-circle' if category == 'danger' else 'check-circle' }}"></i>
+                {{ message }}
+            </div>
+            {% endfor %}
+        {% endif %}
+        {% endwith %}
+
+        <div class="dashboard-grid">
+            <!-- 新增用戶卡片 -->
+            <div class="card">
+                <h2 class="card-title">
+                    <i class="fas fa-user-plus"></i>
+                    新增用戶
+                </h2>
+                <form action="{{ url_for('admin.add_user') }}" method="POST">
+                    <div class="form-group">
+                        <label for="username" class="form-label">用戶名</label>
+                        <input type="text" class="form-input" id="username" name="username" placeholder="請輸入用戶名" required>
+                    </div>
+                    <div class="form-group">
+                        <label for="password" class="form-label">密碼</label>
+                        <input type="password" class="form-input" id="password" name="password" placeholder="請輸入密碼" required>
+                    </div>
+                    <button type="submit" class="btn btn-primary" style="width: 100%;">
+                        <i class="fas fa-plus"></i>
+                        新增用戶
+                    </button>
+                </form>
+            </div>
+
+            <!-- 統計卡片 -->
+            <div class="card">
+                <h2 class="card-title">
+                    <i class="fas fa-chart-bar"></i>
+                    系統統計
+                </h2>
+                <div class="user-stats">
+                    <div class="stat-item">
+                        <div class="stat-value">{{ users|length }}</div>
+                        <div class="stat-label">總用戶數</div>
+                    </div>
+                    <div class="stat-item">
+                        <div class="stat-value">{{ leave_records|length }}</div>
+                        <div class="stat-label">近期請假</div>
+                    </div>
+                    <div class="stat-item">
+                        <div class="stat-value">{{ (users|selectattr('vacation_days', 'lt', 5)|list)|length }}</div>
+                        <div class="stat-label">年假不足</div>
+                    </div>
+                </div>
+            </div>
+        </div>
+
+        <!-- 用戶列表 -->
+        <div class="card">
+            <h2 class="card-title">
+                <i class="fas fa-users"></i>
+                用戶管理
+            </h2>
+            {% if users %}
+            <table class="users-table">
+                <thead>
+                    <tr>
+                        <th>用戶名</th>
+                        <th>年假</th>
+                        <th>病假</th>
+                        <th>事假</th>
+                        <th>生理假</th>
+                        <th>家庭照顧假</th>
+                        <th>喪假</th>
+                        <th>操作</th>
+                    </tr>
+                </thead>
+                <tbody>
+                    {% for user in users %}
+                    <tr>
+                        <td>
+                            <strong>{{ user.username }}</strong>
+                        </td>
+                        <td>{{ user.vacation_days }}</td>
+                        <td>{{ user.sick_days }}</td>
+                        <td>{{ user.personal_days }}</td>
+                        <td>{{ user.menstrual_days }}</td>
+                        <td>{{ user.family_care_days }}</td>
+                        <td>{{ user.compassionate_days }}</td>
+                        <td>
+                            <div style="display: flex; gap: 0.5rem;">
+                                <a href="{{ url_for('leave.user_records', user_id=user.id) }}" class="btn btn-primary btn-sm">
+                                    <i class="fas fa-eye"></i>
+                                    查看
+                                </a>
+                                <button type="button" class="btn btn-secondary btn-sm" onclick="toggleEditForm({{ user.id }})">
+                                    <i class="fas fa-edit"></i>
+                                    編輯
+                                </button>
+                                <button type="button" class="btn btn-danger btn-sm" onclick="confirmDelete({{ user.id }}, '{{ user.username }}')">
+                                    <i class="fas fa-trash"></i>
+                                    刪除
+                                </button>
+                            </div>
+                        </td>
+                    </tr>
+                    <!-- 編輯表單（隱藏） -->
+                    <tr id="edit-{{ user.id }}" style="display: none;">
+                        <td colspan="8">
+                            <form action="{{ url_for('admin.update_user', user_id=user.id) }}" method="POST" style="background: var(--secondary-bg); padding: 1rem; border-radius: 12px;">
+                                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 1rem; margin-bottom: 1rem;">
+                                    <div>
+                                        <label class="form-label">年假</label>
+                                        <input type="number" class="form-input" name="annual_leave" value="{{ user.vacation_days }}" step="0.5" min="0">
+                                    </div>
+                                    <div>
+                                        <label class="form-label">病假</label>
+                                        <input type="number" class="form-input" name="sick_leave" value="{{ user.sick_days }}" step="0.5" min="0">
+                                    </div>
+                                    <div>
+                                        <label class="form-label">事假</label>
+                                        <input type="number" class="form-input" name="personal_leave" value="{{ user.personal_days }}" step="0.5" min="0">
+                                    </div>
+                                    <div>
+                                        <label class="form-label">生理假</label>
+                                        <input type="number" class="form-input" name="menstrual_leave" value="{{ user.menstrual_days }}" step="0.5" min="0">
+                                    </div>
+                                    <div>
+                                        <label class="form-label">家庭照顧假</label>
+                                        <input type="number" class="form-input" name="family_care_leave" value="{{ user.family_care_days }}" step="0.5" min="0">
+                                    </div>
+                                    <div>
+                                        <label class="form-label">喪假</label>
+                                        <input type="number" class="form-input" name="compassionate_leave" value="{{ user.compassionate_days }}" step="0.5" min="0">
+                                    </div>
+                                </div>
+                                <div style="display: flex; gap: 1rem;">
+                                    <button type="submit" class="btn btn-primary">
+                                        <i class="fas fa-save"></i>
+                                        保存
+                                    </button>
+                                    <button type="button" class="btn btn-secondary" onclick="toggleEditForm({{ user.id }})">
+                                        <i class="fas fa-times"></i>
+                                        取消
+                                    </button>
+                                </div>
+                            </form>
+                        </td>
+                    </tr>
+                    {% endfor %}
+                </tbody>
+            </table>
+            {% else %}
+            <p style="text-align: center; color: var(--text-secondary); padding: 2rem;">
+                <i class="fas fa-user-slash"></i>
+                尚無用戶資料
+            </p>
+            {% endif %}
+        </div>
+
+        <!-- 最近請假記錄 -->
+        {% if leave_records %}
+        <div class="card recent-records">
+            <h2 class="card-title">
+                <i class="fas fa-clock"></i>
+                最近請假記錄
+            </h2>
+            {% for record in leave_records %}
+            <div class="record-item">
+                <div class="record-info">
+                    <div class="record-user">{{ record.username if record.username else "Unknown" }}</div>
+                    <div class="record-details">
+                        {{ record.leave_type }} | {{ record.start_date.strftime('%Y-%m-%d') }} 
+                        {% if record.start_date != record.end_date %}
+                        至 {{ record.end_date.strftime('%Y-%m-%d') }}
+                        {% endif %}
+                        | {{ record.days }} 天
+                        {% if record.reason %}
+                        | {{ record.reason }}
+                        {% endif %}
+                    </div>
+                </div>
+                <div class="record-actions">
+                    <form action="{{ url_for('leave.delete_leave', leave_id=record.id) }}" method="POST" style="display:inline;" 
+                          onsubmit="return confirm('確定要刪除這筆請假紀錄嗎？')">
+                        <button type="submit" class="btn btn-danger btn-sm">
+                            <i class="fas fa-trash"></i>
+                            刪除
+                        </button>
+                    </form>
+                </div>
+            </div>
+            {% endfor %}
+        </div>
+        {% endif %}
+    </div>
+
+    <!-- 刪除確認模態框 -->
+    <div id="deleteModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 1000; align-items: center; justify-content: center;">
+        <div style="background: var(--glass-bg); backdrop-filter: blur(20px); border: var(--card-border); border-radius: 20px; padding: 2rem; max-width: 400px; text-align: center;">
+            <h3 style="margin-bottom: 1rem; color: var(--danger-color);">
+                <i class="fas fa-exclamation-triangle"></i>
+                確認刪除
+            </h3>
+            <p style="margin-bottom: 2rem; color: var(--text-secondary);">
+                確定要刪除用戶 <strong id="deleteUsername"></strong> 嗎？此操作無法復原。
+            </p>
+            <div style="display: flex; gap: 1rem; justify-content: center;">
+                <button onclick="closeDeleteModal()" class="btn btn-secondary">取消</button>
+                <form id="deleteForm" method="POST" style="display: inline;">
+                    <button type="submit" class="btn btn-danger">確認刪除</button>
+                </form>
+            </div>
+        </div>
+    </div>
+
+    <script>
+        function toggleEditForm(userId) {
+            const editRow = document.getElementById('edit-' + userId);
+            if (editRow.style.display === 'none') {
+                editRow.style.display = 'table-row';
+            } else {
+                editRow.style.display = 'none';
+            }
+        }
+
+        function confirmDelete(userId, username) {
+            document.getElementById('deleteUsername').textContent = username;
+            document.getElementById('deleteForm').action = '/admin/delete_user/' + userId;
+            document.getElementById('deleteModal').style.display = 'flex';
+        }
+
+        function closeDeleteModal() {
+            document.getElementById('deleteModal').style.display = 'none';
+        }
+
+        // 點擊模態框外部關閉
+        document.getElementById('deleteModal').addEventListener('click', function(e) {
+            if (e.target === this) {
+                closeDeleteModal();
+            }
+        });
+    </script>
+</body>
+</html>
diff --git a/templates/login.html b/templates/login.html
index a606ed9..7ee3611 100644
--- a/templates/login.html
+++ b/templates/login.html
@@ -1,37 +1,360 @@
 <!DOCTYPE html>
-<html lang="en">
+<html lang="zh-TW">
 <head>
     <meta charset="UTF-8">
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
-    <title>登入</title>
-    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css">
+    <title>登入 | 智能請假管理系統</title>
+    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
+    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
+    <style>
+        :root {
+            --primary-bg: linear-gradient(135deg, #0c0c0c 0%, #1a1a1a 50%, #0f0f23 100%);
+            --secondary-bg: rgba(255, 255, 255, 0.05);
+            --glass-bg: rgba(255, 255, 255, 0.08);
+            --border-color: rgba(255, 255, 255, 0.1);
+            --text-primary: #ffffff;
+            --text-secondary: #b0b0b0;
+            --accent-color: #00d4ff;
+            --accent-gradient: linear-gradient(135deg, #00d4ff 0%, #0099cc 100%);
+            --success-color: #00ff88;
+            --warning-color: #ffaa00;
+            --danger-color: #ff4757;
+            --card-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
+            --card-border: 1px solid rgba(255, 255, 255, 0.1);
+        }
+
+        * {
+            margin: 0;
+            padding: 0;
+            box-sizing: border-box;
+        }
+
+        body {
+            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
+            background: var(--primary-bg);
+            color: var(--text-primary);
+            min-height: 100vh;
+            overflow-x: hidden;
+            display: flex;
+            align-items: center;
+            justify-content: center;
+            padding: 1rem;
+            position: relative;
+        }
+
+        /* 動畫背景粒子效果 */
+        body::before {
+            content: '';
+            position: fixed;
+            top: 0;
+            left: 0;
+            width: 100%;
+            height: 100%;
+            background: 
+                radial-gradient(circle at 20% 80%, rgba(120, 119, 198, 0.3) 0%, transparent 50%),
+                radial-gradient(circle at 80% 20%, rgba(255, 119, 198, 0.3) 0%, transparent 50%),
+                radial-gradient(circle at 40% 40%, rgba(120, 219, 255, 0.3) 0%, transparent 50%);
+            animation: rotate 20s linear infinite;
+            pointer-events: none;
+            z-index: -1;
+        }
+
+        @keyframes rotate {
+            0% { transform: rotate(0deg); }
+            100% { transform: rotate(360deg); }
+        }
+
+        .login-container {
+            background: var(--glass-bg);
+            backdrop-filter: blur(20px);
+            border: var(--card-border);
+            border-radius: 20px;
+            padding: 3rem;
+            width: 100%;
+            max-width: 450px;
+            box-shadow: var(--card-shadow);
+            position: relative;
+            overflow: hidden;
+        }
+
+        .login-container::before {
+            content: '';
+            position: absolute;
+            top: 0;
+            left: 0;
+            right: 0;
+            height: 4px;
+            background: var(--accent-gradient);
+            border-radius: 20px 20px 0 0;
+        }
+
+        .login-header {
+            text-align: center;
+            margin-bottom: 2.5rem;
+        }
+
+        .login-title {
+            font-size: 2rem;
+            font-weight: 700;
+            margin-bottom: 0.5rem;
+            background: var(--accent-gradient);
+            -webkit-background-clip: text;
+            -webkit-text-fill-color: transparent;
+            background-clip: text;
+        }
+
+        .login-subtitle {
+            color: var(--text-secondary);
+            font-size: 0.95rem;
+            font-weight: 400;
+        }
+
+        .form-group {
+            margin-bottom: 1.5rem;
+            position: relative;
+        }
+
+        .form-label {
+            display: block;
+            font-size: 0.9rem;
+            font-weight: 500;
+            color: var(--text-primary);
+            margin-bottom: 0.5rem;
+        }
+
+        .form-input {
+            width: 100%;
+            padding: 1rem 1rem 1rem 3rem;
+            background: var(--secondary-bg);
+            border: 1px solid var(--border-color);
+            border-radius: 12px;
+            color: var(--text-primary);
+            font-size: 1rem;
+            transition: all 0.3s ease;
+            backdrop-filter: blur(10px);
+        }
+
+        .form-input:focus {
+            outline: none;
+            border-color: var(--accent-color);
+            box-shadow: 0 0 0 3px rgba(0, 212, 255, 0.1);
+            background: rgba(255, 255, 255, 0.1);
+        }
+
+        .form-input::placeholder {
+            color: rgba(255, 255, 255, 0.5);
+        }
+
+        .input-icon {
+            position: absolute;
+            left: 1rem;
+            top: 2.2rem;
+            color: var(--text-secondary);
+            font-size: 1.1rem;
+            pointer-events: none;
+        }
+
+        .login-btn {
+            width: 100%;
+            padding: 1rem;
+            background: var(--accent-gradient);
+            border: none;
+            border-radius: 12px;
+            color: white;
+            font-size: 1rem;
+            font-weight: 600;
+            cursor: pointer;
+            transition: all 0.3s ease;
+            position: relative;
+            overflow: hidden;
+        }
+
+        .login-btn:hover {
+            transform: translateY(-2px);
+            box-shadow: 0 8px 25px rgba(0, 212, 255, 0.3);
+        }
+
+        .login-btn:active {
+            transform: translateY(0);
+        }
+
+        .login-btn::before {
+            content: '';
+            position: absolute;
+            top: 0;
+            left: -100%;
+            width: 100%;
+            height: 100%;
+            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
+            transition: left 0.5s;
+        }
+
+        .login-btn:hover::before {
+            left: 100%;
+        }
+
+        /* 錯誤訊息樣式 */
+        .alert {
+            padding: 1rem;
+            border-radius: 12px;
+            margin-bottom: 1.5rem;
+            border: none;
+            position: relative;
+            backdrop-filter: blur(10px);
+        }
+
+        .alert-danger {
+            background: rgba(255, 71, 87, 0.15);
+            border: 1px solid rgba(255, 71, 87, 0.3);
+            color: #ffcdd2;
+        }
+
+        .alert-success {
+            background: rgba(0, 255, 136, 0.15);
+            border: 1px solid rgba(0, 255, 136, 0.3);
+            color: #c8e6c9;
+        }
+
+        .alert-warning {
+            background: rgba(255, 170, 0, 0.15);
+            border: 1px solid rgba(255, 170, 0, 0.3);
+            color: #ffe0b2;
+        }
+
+        .alert-info {
+            background: rgba(0, 212, 255, 0.15);
+            border: 1px solid rgba(0, 212, 255, 0.3);
+            color: #b3e5fc;
+        }
+
+        .alert .close-btn {
+            position: absolute;
+            top: 0.5rem;
+            right: 0.75rem;
+            background: none;
+            border: none;
+            color: inherit;
+            font-size: 1.2rem;
+            cursor: pointer;
+            opacity: 0.7;
+            transition: opacity 0.3s ease;
+        }
+
+        .alert .close-btn:hover {
+            opacity: 1;
+        }
+
+        /* 響應式設計 */
+        @media (max-width: 768px) {
+            .login-container {
+                padding: 2rem;
+                margin: 1rem;
+            }
+
+            .login-title {
+                font-size: 1.75rem;
+            }
+        }
+
+        /* 載入動畫 */
+        .loading {
+            display: none;
+            width: 20px;
+            height: 20px;
+            border: 2px solid rgba(255, 255, 255, 0.3);
+            border-radius: 50%;
+            border-top-color: white;
+            animation: spin 1s ease-in-out infinite;
+            margin-right: 0.5rem;
+        }
+
+        @keyframes spin {
+            to { transform: rotate(360deg); }
+        }
+
+        .login-btn.loading .loading {
+            display: inline-block;
+        }
+    </style>
 </head>
 <body>
-    <div class="container">
-        <h1 class="mt-5">登入</h1>
+    <div class="login-container">
+        <div class="login-header">
+            <h1 class="login-title">
+                <i class="fas fa-calendar-check"></i>
+                歡迎回來
+            </h1>
+            <p class="login-subtitle">請登入您的帳號以繼續使用智能請假管理系統</p>
+        </div>
+
         {% with messages = get_flashed_messages(with_categories=true) %}
-          {% if messages %}
-            <div class="mt-3">
-              {% for category, message in messages %}
-                <div class="alert alert-{{ 'danger' if category == 'danger' else category }} alert-dismissible fade show" role="alert">
-                  {{ message }}
-                  <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
-                </div>
-              {% endfor %}
+        {% if messages %}
+            {% for category, message in messages %}
+            <div class="alert alert-{{ 'danger' if category == 'danger' else category }}" role="alert">
+                {{ message }}
+                <button type="button" class="close-btn" onclick="this.parentElement.style.display='none'">&times;</button>
             </div>
-          {% endif %}
+            {% endfor %}
+        {% endif %}
         {% endwith %}
-        <form action="{{ url_for('login') }}" method="POST">
-            <div class="mb-3">
+
+        <form action="{{ url_for('auth.login') }}" method="POST" id="loginForm">
+            <div class="form-group">
                 <label for="username" class="form-label">帳號</label>
-                <input type="text" class="form-control" id="username" name="username" required>
+                <i class="fas fa-user input-icon"></i>
+                <input type="text" 
+                       class="form-input" 
+                       id="username" 
+                       name="username" 
+                       placeholder="請輸入您的帳號"
+                       required 
+                       autocomplete="username">
             </div>
-            <div class="mb-3">
+
+            <div class="form-group">
                 <label for="password" class="form-label">密碼</label>
-                <input type="password" class="form-control" id="password" name="password" required>
+                <i class="fas fa-lock input-icon"></i>
+                <input type="password" 
+                       class="form-input" 
+                       id="password" 
+                       name="password" 
+                       placeholder="請輸入您的密碼"
+                       required 
+                       autocomplete="current-password">
             </div>
-            <button type="submit" class="btn btn-primary">登入</button>
+
+            <button type="submit" class="login-btn" id="loginBtn">
+                <span class="loading"></span>
+                <span class="btn-text">登入系統</span>
+            </button>
         </form>
     </div>
+
+    <script>
+        document.getElementById('loginForm').addEventListener('submit', function(e) {
+            const btn = document.getElementById('loginBtn');
+            const btnText = btn.querySelector('.btn-text');
+            
+            btn.classList.add('loading');
+            btnText.textContent = '登入中...';
+            btn.disabled = true;
+        });
+
+        // 自動聚焦到用戶名輸入框
+        document.addEventListener('DOMContentLoaded', function() {
+            document.getElementById('username').focus();
+        });
+
+        // 輸入框動態效果
+        document.querySelectorAll('.form-input').forEach(input => {
+            input.addEventListener('focus', function() {
+                this.parentElement.querySelector('.input-icon').style.color = 'var(--accent-color)';
+            });
+            
+            input.addEventListener('blur', function() {
+                this.parentElement.querySelector('.input-icon').style.color = 'var(--text-secondary)';
+            });
+        });
+    </script>
 </body>
-</html>
\ No newline at end of file
+</html>
diff --git a/templates/user_records.html b/templates/user_records.html
index ac609e8..163e452 100644
--- a/templates/user_records.html
+++ b/templates/user_records.html
@@ -3,85 +3,548 @@
 <head>
     <meta charset="UTF-8">
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
-    <title>使用者請假紀錄</title>
-    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
+    <title>{{ user.username }} 的請假記錄 | 智能管理系統</title>
+    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
+    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
+    <style>
+        :root {
+            --primary-bg: linear-gradient(135deg, #0c0c0c 0%, #1a1a1a 50%, #0f0f23 100%);
+            --secondary-bg: rgba(255, 255, 255, 0.05);
+            --glass-bg: rgba(255, 255, 255, 0.08);
+            --border-color: rgba(255, 255, 255, 0.1);
+            --text-primary: #ffffff;
+            --text-secondary: #b0b0b0;
+            --accent-color: #00d4ff;
+            --accent-gradient: linear-gradient(135deg, #00d4ff 0%, #0099cc 100%);
+            --success-color: #00ff88;
+            --warning-color: #ffaa00;
+            --danger-color: #ff4757;
+            --card-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
+            --card-border: 1px solid rgba(255, 255, 255, 0.1);
+        }
+
+        * {
+            margin: 0;
+            padding: 0;
+            box-sizing: border-box;
+        }
+
+        body {
+            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
+            background: var(--primary-bg);
+            color: var(--text-primary);
+            min-height: 100vh;
+            line-height: 1.6;
+        }
+
+        /* 動畫背景 */
+        body::before {
+            content: '';
+            position: fixed;
+            top: 0;
+            left: 0;
+            width: 100%;
+            height: 100%;
+            background: 
+                radial-gradient(circle at 20% 80%, rgba(120, 119, 198, 0.3) 0%, transparent 50%),
+                radial-gradient(circle at 80% 20%, rgba(255, 119, 198, 0.3) 0%, transparent 50%),
+                radial-gradient(circle at 40% 40%, rgba(120, 219, 255, 0.3) 0%, transparent 50%);
+            animation: rotate 20s linear infinite;
+            pointer-events: none;
+            z-index: -1;
+        }
+
+        @keyframes rotate {
+            0% { transform: rotate(0deg); }
+            100% { transform: rotate(360deg); }
+        }
+
+        .header {
+            background: var(--glass-bg);
+            backdrop-filter: blur(20px);
+            border-bottom: var(--card-border);
+            padding: 1.5rem 0;
+            position: sticky;
+            top: 0;
+            z-index: 100;
+        }
+
+        .header-container {
+            max-width: 1200px;
+            margin: 0 auto;
+            padding: 0 2rem;
+            display: flex;
+            justify-content: space-between;
+            align-items: center;
+        }
+
+        .header-title {
+            font-size: 1.5rem;
+            font-weight: 700;
+            background: var(--accent-gradient);
+            -webkit-background-clip: text;
+            -webkit-text-fill-color: transparent;
+            background-clip: text;
+        }
+
+        .header-actions {
+            display: flex;
+            gap: 1rem;
+            align-items: center;
+        }
+
+        .container {
+            max-width: 1200px;
+            margin: 0 auto;
+            padding: 2rem;
+        }
+
+        .user-info-grid {
+            display: grid;
+            grid-template-columns: 1fr 2fr;
+            gap: 2rem;
+            margin-bottom: 2rem;
+        }
+
+        .card {
+            background: var(--glass-bg);
+            backdrop-filter: blur(20px);
+            border: var(--card-border);
+            border-radius: 20px;
+            padding: 2rem;
+            box-shadow: var(--card-shadow);
+            position: relative;
+            overflow: hidden;
+        }
+
+        .card::before {
+            content: '';
+            position: absolute;
+            top: 0;
+            left: 0;
+            right: 0;
+            height: 4px;
+            background: var(--accent-gradient);
+            border-radius: 20px 20px 0 0;
+        }
+
+        .card-title {
+            font-size: 1.25rem;
+            font-weight: 600;
+            margin-bottom: 1.5rem;
+            color: var(--text-primary);
+            display: flex;
+            align-items: center;
+            gap: 0.5rem;
+        }
+
+        .user-avatar {
+            width: 80px;
+            height: 80px;
+            border-radius: 50%;
+            background: var(--accent-gradient);
+            display: flex;
+            align-items: center;
+            justify-content: center;
+            font-size: 2rem;
+            color: white;
+            margin-bottom: 1rem;
+        }
+
+        .user-name {
+            font-size: 1.5rem;
+            font-weight: 700;
+            margin-bottom: 0.5rem;
+        }
+
+        .user-role {
+            color: var(--text-secondary);
+            font-size: 0.9rem;
+            margin-bottom: 1.5rem;
+        }
+
+        .leave-stats {
+            display: grid;
+            grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
+            gap: 1rem;
+        }
+
+        .stat-item {
+            text-align: center;
+            padding: 1rem;
+            background: var(--secondary-bg);
+            border-radius: 12px;
+            border: 1px solid var(--border-color);
+            transition: all 0.3s ease;
+        }
+
+        .stat-item:hover {
+            background: rgba(255, 255, 255, 0.1);
+            transform: translateY(-2px);
+        }
+
+        .stat-value {
+            font-size: 1.5rem;
+            font-weight: 700;
+            color: var(--accent-color);
+        }
+
+        .stat-label {
+            font-size: 0.8rem;
+            color: var(--text-secondary);
+            margin-top: 0.25rem;
+        }
+
+        .btn {
+            padding: 0.75rem 1.5rem;
+            border: none;
+            border-radius: 12px;
+            font-size: 0.9rem;
+            font-weight: 500;
+            cursor: pointer;
+            transition: all 0.3s ease;
+            text-decoration: none;
+            display: inline-block;
+            text-align: center;
+        }
+
+        .btn-primary {
+            background: var(--accent-gradient);
+            color: white;
+        }
+
+        .btn-primary:hover {
+            transform: translateY(-2px);
+            box-shadow: 0 8px 25px rgba(0, 212, 255, 0.3);
+        }
+
+        .btn-secondary {
+            background: var(--secondary-bg);
+            color: var(--text-primary);
+            border: 1px solid var(--border-color);
+        }
+
+        .btn-secondary:hover {
+            background: rgba(255, 255, 255, 0.1);
+        }
+
+        .btn-danger {
+            background: linear-gradient(135deg, var(--danger-color) 0%, #c44569 100%);
+            color: white;
+        }
+
+        .btn-danger:hover {
+            transform: translateY(-2px);
+            box-shadow: 0 8px 25px rgba(255, 71, 87, 0.3);
+        }
+
+        .btn-sm {
+            padding: 0.5rem 1rem;
+            font-size: 0.8rem;
+        }
+
+        .form-group {
+            margin-bottom: 1rem;
+        }
+
+        .form-label {
+            display: block;
+            font-size: 0.9rem;
+            font-weight: 500;
+            color: var(--text-primary);
+            margin-bottom: 0.5rem;
+        }
+
+        .form-input {
+            width: 100%;
+            padding: 0.75rem 1rem;
+            background: var(--secondary-bg);
+            border: 1px solid var(--border-color);
+            border-radius: 12px;
+            color: var(--text-primary);
+            font-size: 0.95rem;
+            transition: all 0.3s ease;
+        }
+
+        .form-input:focus {
+            outline: none;
+            border-color: var(--accent-color);
+            box-shadow: 0 0 0 3px rgba(0, 212, 255, 0.1);
+        }
+
+        .records-table {
+            width: 100%;
+            border-collapse: collapse;
+            margin-top: 1rem;
+        }
+
+        .records-table th,
+        .records-table td {
+            padding: 1rem;
+            text-align: left;
+            border-bottom: 1px solid var(--border-color);
+        }
+
+        .records-table th {
+            font-weight: 600;
+            color: var(--accent-color);
+            background: rgba(0, 212, 255, 0.1);
+        }
+
+        .records-table tr:hover {
+            background: rgba(255, 255, 255, 0.05);
+        }
+
+        .leave-type-badge {
+            padding: 0.25rem 0.75rem;
+            border-radius: 20px;
+            font-size: 0.8rem;
+            font-weight: 500;
+            background: var(--secondary-bg);
+            border: 1px solid var(--border-color);
+        }
+
+        .password-form {
+            background: var(--secondary-bg);
+            padding: 1.5rem;
+            border-radius: 12px;
+            border: 1px solid var(--border-color);
+            margin-top: 1rem;
+        }
+
+        .alert {
+            padding: 1rem;
+            border-radius: 12px;
+            margin-bottom: 1rem;
+            border: none;
+        }
+
+        .alert-success {
+            background: rgba(0, 255, 136, 0.15);
+            border: 1px solid rgba(0, 255, 136, 0.3);
+            color: #c8e6c9;
+        }
+
+        .alert-danger {
+            background: rgba(255, 71, 87, 0.15);
+            border: 1px solid rgba(255, 71, 87, 0.3);
+            color: #ffcdd2;
+        }
+
+        .empty-state {
+            text-align: center;
+            padding: 3rem 2rem;
+            color: var(--text-secondary);
+        }
+
+        .empty-state i {
+            font-size: 3rem;
+            margin-bottom: 1rem;
+            opacity: 0.5;
+        }
+
+        /* 響應式設計 */
+        @media (max-width: 1024px) {
+            .user-info-grid {
+                grid-template-columns: 1fr;
+            }
+            
+            .header-container {
+                padding: 0 1rem;
+            }
+            
+            .container {
+                padding: 1rem;
+            }
+        }
+
+        @media (max-width: 768px) {
+            .records-table {
+                font-size: 0.9rem;
+            }
+            
+            .records-table th,
+            .records-table td {
+                padding: 0.75rem 0.5rem;
+            }
+            
+            .leave-stats {
+                grid-template-columns: repeat(auto-fit, minmax(80px, 1fr));
+            }
+            
+            .btn {
+                padding: 0.5rem 1rem;
+                font-size: 0.85rem;
+            }
+        }
+    </style>
 </head>
 <body>
-    <div class="container mt-5">
-        <div class="d-flex justify-content-between align-items-center mb-4">
-            <h1>使用者請假紀錄</h1>
-            <a href="{{ url_for('admin') }}" class="btn btn-primary">返回管理頁面</a>
+    <header class="header">
+        <div class="header-container">
+            <h1 class="header-title">
+                <i class="fas fa-user-circle"></i>
+                {{ user.username }} 的請假記錄
+            </h1>
+            <div class="header-actions">
+                <a href="{{ url_for('admin.admin') }}" class="btn btn-secondary btn-sm">
+                    <i class="fas fa-arrow-left"></i>
+                    返回管理頁面
+                </a>
+            </div>
         </div>
+    </header>
 
-        <!-- 修改密碼表單 -->
-        <div class="mb-4">
-            <h2>修改密碼</h2>
-            <form action="{{ url_for('update_password', user_id=user.id) }}" method="POST">
-                <div class="form-group">
-                    <label for="new_password">新密碼</label>
-                    <input type="password" class="form-control" id="new_password" name="new_password" required>
+    <div class="container">
+        <div class="user-info-grid">
+            <!-- 用戶信息卡片 -->
+            <div class="card">
+                <div style="text-align: center;">
+                    <div class="user-avatar">
+                        <i class="fas fa-user"></i>
+                    </div>
+                    <div class="user-name">{{ user.username }}</div>
+                    <div class="user-role">一般用戶</div>
+                </div>
+                
+                <!-- 修改密碼表單 -->
+                <div class="password-form">
+                    <h3 style="margin-bottom: 1rem; color: var(--text-primary);">
+                        <i class="fas fa-key"></i>
+                        修改密碼
+                    </h3>
+                    <form action="{{ url_for('admin.update_password', user_id=user.id) }}" method="POST">
+                        <div class="form-group">
+                            <label for="new_password" class="form-label">新密碼</label>
+                            <input type="password" class="form-input" id="new_password" name="new_password" placeholder="請輸入新密碼" required>
+                        </div>
+                        <button type="submit" class="btn btn-primary" style="width: 100%;">
+                            <i class="fas fa-save"></i>
+                            更新密碼
+                        </button>
+                    </form>
+                </div>
+            </div>
+
+            <!-- 請假統計卡片 -->
+            <div class="card">
+                <h2 class="card-title">
+                    <i class="fas fa-chart-pie"></i>
+                    請假天數統計 ({{ current_year }})
+                </h2>
+                <div class="leave-stats">
+                    <div class="stat-item">
+                        <div class="stat-value">{{ user.vacation_days }}</div>
+                        <div class="stat-label">年假</div>
+                    </div>
+                    <div class="stat-item">
+                        <div class="stat-value">{{ user.sick_days }}</div>
+                        <div class="stat-label">病假</div>
+                    </div>
+                    <div class="stat-item">
+                        <div class="stat-value">{{ user.personal_days }}</div>
+                        <div class="stat-label">事假</div>
+                    </div>
+                    <div class="stat-item">
+                        <div class="stat-value">{{ user.menstrual_days }}</div>
+                        <div class="stat-label">生理假</div>
+                    </div>
+                    <div class="stat-item">
+                        <div class="stat-value">{{ user.family_care_days }}</div>
+                        <div class="stat-label">家庭照顧假</div>
+                    </div>
+                    <div class="stat-item">
+                        <div class="stat-value">{{ user.compassionate_days }}</div>
+                        <div class="stat-label">喪假</div>
+                    </div>
                 </div>
-                <button type="submit" class="btn btn-warning">修改密碼</button>
-            </form>
-        </div>
 
-        <!-- 每年度請假紀錄統計 -->
-        <div class="mb-4">
-            <h2>{{ current_year }} 年度請假紀錄統計</h2>
-            <p>特休: {{ annual_leave_days }} 天</p>
-            <p>病假: {{ sick_leave_days }} 天</p>
-            <p>事假: {{ personal_leave_days }} 天</p>
-            <p>生理假: {{ menstrual_leave_days }} 天</p>
-            <p>家庭照顧假: {{ family_care_leave_days }} 天</p>
-            <p>同情假: {{ compassionate_leave_days }} 天</p>
+                <!-- 年度統計 -->
+                {% if used_annual_leave is defined %}
+                <div style="margin-top: 2rem; padding-top: 1.5rem; border-top: 1px solid var(--border-color);">
+                    <h3 style="margin-bottom: 1rem; color: var(--text-primary); font-size: 1.1rem;">
+                        <i class="fas fa-calendar-year"></i>
+                        年度使用統計
+                    </h3>
+                    <div class="leave-stats">
+                        <div class="stat-item">
+                            <div class="stat-value" style="color: var(--warning-color);">{{ used_annual_leave or 0 }}</div>
+                            <div class="stat-label">已用年假</div>
+                        </div>
+                        <div class="stat-item">
+                            <div class="stat-value" style="color: var(--danger-color);">{{ used_sick_leave or 0 }}</div>
+                            <div class="stat-label">已用病假</div>
+                        </div>
+                        <div class="stat-item">
+                            <div class="stat-value" style="color: var(--success-color);">{{ total_leave_days or 0 }}</div>
+                            <div class="stat-label">總請假天數</div>
+                        </div>
+                    </div>
+                </div>
+                {% endif %}
+            </div>
         </div>
 
-        <table class="table table-bordered table-hover">
-            <thead class="thead-light">
-                <tr>
-                    <th>請假類型</th>
-                    <th>開始日期</th>
-                    <th>結束日期</th>
-                    <th>半天</th>
-                    <th>原因</th>
-                    <th>證明</th>
-                    <th>操作</th>
-                </tr>
-            </thead>
-            <tbody>
-                {% for record in leave_records %}
-                <tr>
-                    <td>{{ record.leave_type }}</td>
-                    <td>{{ record.start_date }}</td>
-                    <td>{{ record.end_date }}</td>
-                    <td>{{ '是' if record.half_day else '否' }}</td>
-                    <td>{{ record.reason or '無' }}</td>
-                    <td>
-                        {% if record.receipt_url %}
-                        <a href="{{ record.receipt_url }}" 
-                           target="_blank">
-                           查看證明圖片
-                        </a>
-                        {% else %}
-                            無
-                        {% endif %}
-                    </td>
-                    <td>
-                        <form action="{{ url_for('delete_leave', leave_id=record.id, redirect_to='user_records') }}" method="POST" style="display:inline;">
-                            <button type="submit" class="btn btn-danger btn-sm" onclick="return confirm('確認刪除此請假紀錄？')">刪除</button>
-                        </form>
-                    </td>
-                </tr>
-                {% else %}
-                <tr>
-                    <td colspan="7" class="text-center">尚無請假紀錄。</td>
-                </tr>
-                {% endfor %}
-            </tbody>
-        </table>
+        <!-- 請假記錄列表 -->
+        <div class="card">
+            <h2 class="card-title">
+                <i class="fas fa-history"></i>
+                請假記錄
+            </h2>
+            
+            {% if leave_records %}
+            <table class="records-table">
+                <thead>
+                    <tr>
+                        <th>請假類型</th>
+                        <th>開始日期</th>
+                        <th>結束日期</th>
+                        <th>天數</th>
+                        <th>半天</th>
+                        <th>原因</th>
+                        <th>操作</th>
+                    </tr>
+                </thead>
+                <tbody>
+                    {% for record in leave_records %}
+                    <tr>
+                        <td>
+                            <span class="leave-type-badge">{{ record.leave_type }}</span>
+                        </td>
+                        <td>{{ record.start_date.strftime('%Y-%m-%d') }}</td>
+                        <td>{{ record.end_date.strftime('%Y-%m-%d') }}</td>
+                        <td>
+                            <strong style="color: var(--accent-color);">{{ record.days }}</strong>
+                        </td>
+                        <td>
+                            {% if record.half_day %}
+                            <i class="fas fa-check" style="color: var(--success-color);"></i>
+                            {% else %}
+                            <i class="fas fa-times" style="color: var(--text-secondary);"></i>
+                            {% endif %}
+                        </td>
+                        <td>{{ record.reason or '-' }}</td>
+                        <td>
+                            <form action="{{ url_for('leave.delete_leave', leave_id=record.id, redirect_to='user_records') }}" method="POST" style="display:inline;" 
+                                  onsubmit="return confirm('確定要刪除這筆請假紀錄嗎？')">
+                                <button type="submit" class="btn btn-danger btn-sm">
+                                    <i class="fas fa-trash"></i>
+                                    刪除
+                                </button>
+                            </form>
+                        </td>
+                    </tr>
+                    {% endfor %}
+                </tbody>
+            </table>
+            {% else %}
+            <div class="empty-state">
+                <i class="fas fa-calendar-times"></i>
+                <h3>尚無請假記錄</h3>
+                <p>{{ user.username }} 還沒有任何請假記錄</p>
+            </div>
+            {% endif %}
+        </div>
     </div>
-    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
-    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
-    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
 </body>
-</html>
\ No newline at end of file
+</html>
-- 
2.40.1


From 210965ba58fa5a8339efc352192e25fee5c81dea Mon Sep 17 00:00:00 2001
From: Claude Code <claude@anthropic.com>
Date: Wed, 20 Aug 2025 07:26:54 +0000
Subject: [PATCH 2/2] =?UTF-8?q?=E6=B8=85=E7=90=86=E8=87=A8=E6=99=82?=
 =?UTF-8?q?=E6=AA=94=E6=A1=88=E5=92=8C=E5=82=99=E4=BB=BD?=
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

🧹 清理以下檔案：
- temp_admin_fix.txt
- templates/admin.html.issue
- 所有 .backup 檔案

🤖 Generated with Claude Code

Co-Authored-By: Claude <noreply@anthropic.com>
---
 temp_admin_fix.txt         |  41 ---
 templates/admin.html.issue | 641 -------------------------------------
 2 files changed, 682 deletions(-)
 delete mode 100644 temp_admin_fix.txt
 delete mode 100644 templates/admin.html.issue

diff --git a/temp_admin_fix.txt b/temp_admin_fix.txt
deleted file mode 100644
index 6f4f3cb..0000000
--- a/temp_admin_fix.txt
+++ /dev/null
@@ -1,41 +0,0 @@
-        <!-- 最近請假記錄 -->
-        {% if leave_records %}
-        <div class="card recent-records">
-            <h2 class="card-title">
-                <i class="fas fa-clock"></i>
-                最近請假記錄
-            </h2>
-            {% for user_id, records in leave_records.items() %}
-                {% for record in records %}
-                <div class="record-item">
-                    <div class="record-info">
-                        <div class="record-user">
-                            {% for user in users if user.id == user_id %}
-                                {{ user.username }}
-                            {% endfor %}
-                        </div>
-                        <div class="record-details">
-                            {{ record.leave_type }} | {{ record.start_date.strftime('%Y-%m-%d') }} 
-                            {% if record.start_date != record.end_date %}
-                            至 {{ record.end_date.strftime('%Y-%m-%d') }}
-                            {% endif %}
-                            | {{ record.days }} 天
-                            {% if record.reason %}
-                            | {{ record.reason }}
-                            {% endif %}
-                        </div>
-                    </div>
-                    <div class="record-actions">
-                        <form action="{{ url_for('leave.delete_leave', leave_id=record.id) }}" method="POST" style="display:inline;" 
-                              onsubmit="return confirm('確定要刪除這筆請假紀錄嗎？')">
-                            <button type="submit" class="btn btn-danger btn-sm">
-                                <i class="fas fa-trash"></i>
-                                刪除
-                            </button>
-                        </form>
-                    </div>
-                </div>
-                {% endfor %}
-            {% endfor %}
-        </div>
-        {% endif %}
diff --git a/templates/admin.html.issue b/templates/admin.html.issue
deleted file mode 100644
index 5a77884..0000000
--- a/templates/admin.html.issue
+++ /dev/null
@@ -1,641 +0,0 @@
-<!DOCTYPE html>
-<html lang="zh-TW">
-<head>
-    <meta charset="UTF-8">
-    <meta name="viewport" content="width=device-width, initial-scale=1.0">
-    <title>管理員儀表板 | 智能管理系統</title>
-    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
-    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
-    <style>
-        :root {
-            --primary-bg: linear-gradient(135deg, #0c0c0c 0%, #1a1a1a 50%, #0f0f23 100%);
-            --secondary-bg: rgba(255, 255, 255, 0.05);
-            --glass-bg: rgba(255, 255, 255, 0.08);
-            --border-color: rgba(255, 255, 255, 0.1);
-            --text-primary: #ffffff;
-            --text-secondary: #b0b0b0;
-            --accent-color: #00d4ff;
-            --accent-gradient: linear-gradient(135deg, #00d4ff 0%, #0099cc 100%);
-            --success-color: #00ff88;
-            --warning-color: #ffaa00;
-            --danger-color: #ff4757;
-            --card-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
-            --card-border: 1px solid rgba(255, 255, 255, 0.1);
-        }
-
-        * {
-            margin: 0;
-            padding: 0;
-            box-sizing: border-box;
-        }
-
-        body {
-            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
-            background: var(--primary-bg);
-            color: var(--text-primary);
-            min-height: 100vh;
-            line-height: 1.6;
-        }
-
-        /* 動畫背景 */
-        body::before {
-            content: '';
-            position: fixed;
-            top: 0;
-            left: 0;
-            width: 100%;
-            height: 100%;
-            background: 
-                radial-gradient(circle at 20% 80%, rgba(120, 119, 198, 0.3) 0%, transparent 50%),
-                radial-gradient(circle at 80% 20%, rgba(255, 119, 198, 0.3) 0%, transparent 50%),
-                radial-gradient(circle at 40% 40%, rgba(120, 219, 255, 0.3) 0%, transparent 50%);
-            animation: rotate 20s linear infinite;
-            pointer-events: none;
-            z-index: -1;
-        }
-
-        @keyframes rotate {
-            0% { transform: rotate(0deg); }
-            100% { transform: rotate(360deg); }
-        }
-
-        .header {
-            background: var(--glass-bg);
-            backdrop-filter: blur(20px);
-            border-bottom: var(--card-border);
-            padding: 1.5rem 0;
-            position: sticky;
-            top: 0;
-            z-index: 100;
-        }
-
-        .header-container {
-            max-width: 1200px;
-            margin: 0 auto;
-            padding: 0 2rem;
-            display: flex;
-            justify-content: space-between;
-            align-items: center;
-        }
-
-        .header-title {
-            font-size: 1.5rem;
-            font-weight: 700;
-            background: var(--accent-gradient);
-            -webkit-background-clip: text;
-            -webkit-text-fill-color: transparent;
-            background-clip: text;
-        }
-
-        .header-actions {
-            display: flex;
-            gap: 1rem;
-            align-items: center;
-        }
-
-        .container {
-            max-width: 1200px;
-            margin: 0 auto;
-            padding: 2rem;
-        }
-
-        .dashboard-grid {
-            display: grid;
-            grid-template-columns: 1fr 2fr;
-            gap: 2rem;
-            margin-bottom: 2rem;
-        }
-
-        .card {
-            background: var(--glass-bg);
-            backdrop-filter: blur(20px);
-            border: var(--card-border);
-            border-radius: 20px;
-            padding: 2rem;
-            box-shadow: var(--card-shadow);
-            position: relative;
-            overflow: hidden;
-        }
-
-        .card::before {
-            content: '';
-            position: absolute;
-            top: 0;
-            left: 0;
-            right: 0;
-            height: 4px;
-            background: var(--accent-gradient);
-            border-radius: 20px 20px 0 0;
-        }
-
-        .card-title {
-            font-size: 1.25rem;
-            font-weight: 600;
-            margin-bottom: 1.5rem;
-            color: var(--text-primary);
-            display: flex;
-            align-items: center;
-            gap: 0.5rem;
-        }
-
-        .form-group {
-            margin-bottom: 1rem;
-        }
-
-        .form-label {
-            display: block;
-            font-size: 0.9rem;
-            font-weight: 500;
-            color: var(--text-primary);
-            margin-bottom: 0.5rem;
-        }
-
-        .form-input {
-            width: 100%;
-            padding: 0.75rem 1rem;
-            background: var(--secondary-bg);
-            border: 1px solid var(--border-color);
-            border-radius: 12px;
-            color: var(--text-primary);
-            font-size: 0.95rem;
-            transition: all 0.3s ease;
-        }
-
-        .form-input:focus {
-            outline: none;
-            border-color: var(--accent-color);
-            box-shadow: 0 0 0 3px rgba(0, 212, 255, 0.1);
-        }
-
-        .btn {
-            padding: 0.75rem 1.5rem;
-            border: none;
-            border-radius: 12px;
-            font-size: 0.9rem;
-            font-weight: 500;
-            cursor: pointer;
-            transition: all 0.3s ease;
-            text-decoration: none;
-            display: inline-block;
-            text-align: center;
-        }
-
-        .btn-primary {
-            background: var(--accent-gradient);
-            color: white;
-        }
-
-        .btn-primary:hover {
-            transform: translateY(-2px);
-            box-shadow: 0 8px 25px rgba(0, 212, 255, 0.3);
-        }
-
-        .btn-secondary {
-            background: var(--secondary-bg);
-            color: var(--text-primary);
-            border: 1px solid var(--border-color);
-        }
-
-        .btn-secondary:hover {
-            background: rgba(255, 255, 255, 0.1);
-        }
-
-        .btn-danger {
-            background: linear-gradient(135deg, var(--danger-color) 0%, #c44569 100%);
-            color: white;
-        }
-
-        .btn-danger:hover {
-            transform: translateY(-2px);
-            box-shadow: 0 8px 25px rgba(255, 71, 87, 0.3);
-        }
-
-        .btn-sm {
-            padding: 0.5rem 1rem;
-            font-size: 0.8rem;
-        }
-
-        .users-table {
-            width: 100%;
-            border-collapse: collapse;
-            margin-top: 1rem;
-        }
-
-        .users-table th,
-        .users-table td {
-            padding: 1rem;
-            text-align: left;
-            border-bottom: 1px solid var(--border-color);
-        }
-
-        .users-table th {
-            font-weight: 600;
-            color: var(--accent-color);
-            background: rgba(0, 212, 255, 0.1);
-        }
-
-        .users-table tr:hover {
-            background: rgba(255, 255, 255, 0.05);
-        }
-
-        .user-stats {
-            display: grid;
-            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
-            gap: 1rem;
-            margin-top: 1rem;
-        }
-
-        .stat-item {
-            text-align: center;
-            padding: 1rem;
-            background: var(--secondary-bg);
-            border-radius: 12px;
-            border: 1px solid var(--border-color);
-        }
-
-        .stat-value {
-            font-size: 1.5rem;
-            font-weight: 700;
-            color: var(--accent-color);
-        }
-
-        .stat-label {
-            font-size: 0.8rem;
-            color: var(--text-secondary);
-            margin-top: 0.25rem;
-        }
-
-        .recent-records {
-            margin-top: 2rem;
-        }
-
-        .record-item {
-            display: flex;
-            justify-content: space-between;
-            align-items: center;
-            padding: 1rem;
-            margin-bottom: 0.5rem;
-            background: var(--secondary-bg);
-            border-radius: 12px;
-            border: 1px solid var(--border-color);
-            transition: all 0.3s ease;
-        }
-
-        .record-item:hover {
-            background: rgba(255, 255, 255, 0.1);
-            transform: translateY(-2px);
-        }
-
-        .record-info {
-            flex: 1;
-        }
-
-        .record-user {
-            font-weight: 600;
-            color: var(--text-primary);
-        }
-
-        .record-details {
-            font-size: 0.9rem;
-            color: var(--text-secondary);
-            margin-top: 0.25rem;
-        }
-
-        .record-actions {
-            display: flex;
-            gap: 0.5rem;
-        }
-
-        .status-badge {
-            padding: 0.25rem 0.75rem;
-            border-radius: 20px;
-            font-size: 0.8rem;
-            font-weight: 500;
-            text-transform: uppercase;
-        }
-
-        .status-approved {
-            background: rgba(0, 255, 136, 0.2);
-            color: var(--success-color);
-            border: 1px solid rgba(0, 255, 136, 0.3);
-        }
-
-        .status-pending {
-            background: rgba(255, 170, 0, 0.2);
-            color: var(--warning-color);
-            border: 1px solid rgba(255, 170, 0, 0.3);
-        }
-
-        .alert {
-            padding: 1rem;
-            border-radius: 12px;
-            margin-bottom: 1rem;
-            border: none;
-        }
-
-        .alert-success {
-            background: rgba(0, 255, 136, 0.15);
-            border: 1px solid rgba(0, 255, 136, 0.3);
-            color: #c8e6c9;
-        }
-
-        .alert-danger {
-            background: rgba(255, 71, 87, 0.15);
-            border: 1px solid rgba(255, 71, 87, 0.3);
-            color: #ffcdd2;
-        }
-
-        /* 響應式設計 */
-        @media (max-width: 1024px) {
-            .dashboard-grid {
-                grid-template-columns: 1fr;
-            }
-            
-            .header-container {
-                padding: 0 1rem;
-            }
-            
-            .container {
-                padding: 1rem;
-            }
-        }
-
-        @media (max-width: 768px) {
-            .users-table {
-                font-size: 0.9rem;
-            }
-            
-            .users-table th,
-            .users-table td {
-                padding: 0.75rem 0.5rem;
-            }
-            
-            .btn {
-                padding: 0.5rem 1rem;
-                font-size: 0.85rem;
-            }
-        }
-    </style>
-</head>
-<body>
-    <header class="header">
-        <div class="header-container">
-            <h1 class="header-title">
-                <i class="fas fa-users-cog"></i>
-                管理員儀表板
-            </h1>
-            <div class="header-actions">
-                <a href="{{ url_for('auth.logout') }}" class="btn btn-secondary btn-sm">
-                    <i class="fas fa-sign-out-alt"></i>
-                    登出
-                </a>
-            </div>
-        </div>
-    </header>
-
-    <div class="container">
-        {% with messages = get_flashed_messages(with_categories=true) %}
-        {% if messages %}
-            {% for category, message in messages %}
-            <div class="alert alert-{{ 'danger' if category == 'danger' else category }}">
-                <i class="fas fa-{{ 'exclamation-circle' if category == 'danger' else 'check-circle' }}"></i>
-                {{ message }}
-            </div>
-            {% endfor %}
-        {% endif %}
-        {% endwith %}
-
-        <div class="dashboard-grid">
-            <!-- 新增用戶卡片 -->
-            <div class="card">
-                <h2 class="card-title">
-                    <i class="fas fa-user-plus"></i>
-                    新增用戶
-                </h2>
-                <form action="{{ url_for('admin.add_user') }}" method="POST">
-                    <div class="form-group">
-                        <label for="username" class="form-label">用戶名</label>
-                        <input type="text" class="form-input" id="username" name="username" placeholder="請輸入用戶名" required>
-                    </div>
-                    <div class="form-group">
-                        <label for="password" class="form-label">密碼</label>
-                        <input type="password" class="form-input" id="password" name="password" placeholder="請輸入密碼" required>
-                    </div>
-                    <button type="submit" class="btn btn-primary" style="width: 100%;">
-                        <i class="fas fa-plus"></i>
-                        新增用戶
-                    </button>
-                </form>
-            </div>
-
-            <!-- 統計卡片 -->
-            <div class="card">
-                <h2 class="card-title">
-                    <i class="fas fa-chart-bar"></i>
-                    系統統計
-                </h2>
-                <div class="user-stats">
-                    <div class="stat-item">
-                        <div class="stat-value">{{ users|length }}</div>
-                        <div class="stat-label">總用戶數</div>
-                    </div>
-                    <div class="stat-item">
-                        <div class="stat-value">{{ leave_records|length }}</div>
-                        <div class="stat-label">近期請假</div>
-                    </div>
-                    <div class="stat-item">
-                        <div class="stat-value">{{ (users|selectattr('vacation_days', 'lt', 5)|list)|length }}</div>
-                        <div class="stat-label">年假不足</div>
-                    </div>
-                </div>
-            </div>
-        </div>
-
-        <!-- 用戶列表 -->
-        <div class="card">
-            <h2 class="card-title">
-                <i class="fas fa-users"></i>
-                用戶管理
-            </h2>
-            {% if users %}
-            <table class="users-table">
-                <thead>
-                    <tr>
-                        <th>用戶名</th>
-                        <th>年假</th>
-                        <th>病假</th>
-                        <th>事假</th>
-                        <th>生理假</th>
-                        <th>家庭照顧假</th>
-                        <th>喪假</th>
-                        <th>操作</th>
-                    </tr>
-                </thead>
-                <tbody>
-                    {% for user in users %}
-                    <tr>
-                        <td>
-                            <strong>{{ user.username }}</strong>
-                        </td>
-                        <td>{{ user.vacation_days }}</td>
-                        <td>{{ user.sick_days }}</td>
-                        <td>{{ user.personal_days }}</td>
-                        <td>{{ user.menstrual_days }}</td>
-                        <td>{{ user.family_care_days }}</td>
-                        <td>{{ user.compassionate_days }}</td>
-                        <td>
-                            <div style="display: flex; gap: 0.5rem;">
-                                <a href="{{ url_for('leave.user_records', user_id=user.id) }}" class="btn btn-primary btn-sm">
-                                    <i class="fas fa-eye"></i>
-                                    查看
-                                </a>
-                                <button type="button" class="btn btn-secondary btn-sm" onclick="toggleEditForm({{ user.id }})">
-                                    <i class="fas fa-edit"></i>
-                                    編輯
-                                </button>
-                                <button type="button" class="btn btn-danger btn-sm" onclick="confirmDelete({{ user.id }}, '{{ user.username }}')">
-                                    <i class="fas fa-trash"></i>
-                                    刪除
-                                </button>
-                            </div>
-                        </td>
-                    </tr>
-                    <!-- 編輯表單（隱藏） -->
-                    <tr id="edit-{{ user.id }}" style="display: none;">
-                        <td colspan="8">
-                            <form action="{{ url_for('admin.update_user', user_id=user.id) }}" method="POST" style="background: var(--secondary-bg); padding: 1rem; border-radius: 12px;">
-                                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 1rem; margin-bottom: 1rem;">
-                                    <div>
-                                        <label class="form-label">年假</label>
-                                        <input type="number" class="form-input" name="annual_leave" value="{{ user.vacation_days }}" step="0.5" min="0">
-                                    </div>
-                                    <div>
-                                        <label class="form-label">病假</label>
-                                        <input type="number" class="form-input" name="sick_leave" value="{{ user.sick_days }}" step="0.5" min="0">
-                                    </div>
-                                    <div>
-                                        <label class="form-label">事假</label>
-                                        <input type="number" class="form-input" name="personal_leave" value="{{ user.personal_days }}" step="0.5" min="0">
-                                    </div>
-                                    <div>
-                                        <label class="form-label">生理假</label>
-                                        <input type="number" class="form-input" name="menstrual_leave" value="{{ user.menstrual_days }}" step="0.5" min="0">
-                                    </div>
-                                    <div>
-                                        <label class="form-label">家庭照顧假</label>
-                                        <input type="number" class="form-input" name="family_care_leave" value="{{ user.family_care_days }}" step="0.5" min="0">
-                                    </div>
-                                    <div>
-                                        <label class="form-label">喪假</label>
-                                        <input type="number" class="form-input" name="compassionate_leave" value="{{ user.compassionate_days }}" step="0.5" min="0">
-                                    </div>
-                                </div>
-                                <div style="display: flex; gap: 1rem;">
-                                    <button type="submit" class="btn btn-primary">
-                                        <i class="fas fa-save"></i>
-                                        保存
-                                    </button>
-                                    <button type="button" class="btn btn-secondary" onclick="toggleEditForm({{ user.id }})">
-                                        <i class="fas fa-times"></i>
-                                        取消
-                                    </button>
-                                </div>
-                            </form>
-                        </td>
-                    </tr>
-                    {% endfor %}
-                </tbody>
-            </table>
-            {% else %}
-            <p style="text-align: center; color: var(--text-secondary); padding: 2rem;">
-                <i class="fas fa-user-slash"></i>
-                尚無用戶資料
-            </p>
-            {% endif %}
-        </div>
-
-        <!-- 最近請假記錄 -->
-        {% if leave_records %}
-        <div class="card recent-records">
-            <h2 class="card-title">
-                <i class="fas fa-clock"></i>
-                最近請假記錄
-            </h2>
-            {% for record in leave_records %}
-            <div class="record-item">
-                <div class="record-info">
-                    <div class="record-user">{{ record.username if record.username else "Unknown" }}</div>
-                    <div class="record-details">
-                        {{ record.leave_type }} | {{ record.start_date.strftime('%Y-%m-%d') }} 
-                        {% if record.start_date != record.end_date %}
-                        至 {{ record.end_date.strftime('%Y-%m-%d') }}
-                        {% endif %}
-                        | {{ record.days }} 天
-                        {% if record.reason %}
-                        | {{ record.reason }}
-                        {% endif %}
-                    </div>
-                </div>
-                <div class="record-actions">
-                    <form action="{{ url_for('leave.delete_leave', leave_id=record.id) }}" method="POST" style="display:inline;" 
-                          onsubmit="return confirm('確定要刪除這筆請假紀錄嗎？')">
-                        <button type="submit" class="btn btn-danger btn-sm">
-                            <i class="fas fa-trash"></i>
-                            刪除
-                        </button>
-                    </form>
-                </div>
-            </div>
-            {% endfor %}
-        </div>
-        {% endif %}
-    </div>
-
-    <!-- 刪除確認模態框 -->
-    <div id="deleteModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 1000; align-items: center; justify-content: center;">
-        <div style="background: var(--glass-bg); backdrop-filter: blur(20px); border: var(--card-border); border-radius: 20px; padding: 2rem; max-width: 400px; text-align: center;">
-            <h3 style="margin-bottom: 1rem; color: var(--danger-color);">
-                <i class="fas fa-exclamation-triangle"></i>
-                確認刪除
-            </h3>
-            <p style="margin-bottom: 2rem; color: var(--text-secondary);">
-                確定要刪除用戶 <strong id="deleteUsername"></strong> 嗎？此操作無法復原。
-            </p>
-            <div style="display: flex; gap: 1rem; justify-content: center;">
-                <button onclick="closeDeleteModal()" class="btn btn-secondary">取消</button>
-                <form id="deleteForm" method="POST" style="display: inline;">
-                    <button type="submit" class="btn btn-danger">確認刪除</button>
-                </form>
-            </div>
-        </div>
-    </div>
-
-    <script>
-        function toggleEditForm(userId) {
-            const editRow = document.getElementById('edit-' + userId);
-            if (editRow.style.display === 'none') {
-                editRow.style.display = 'table-row';
-            } else {
-                editRow.style.display = 'none';
-            }
-        }
-
-        function confirmDelete(userId, username) {
-            document.getElementById('deleteUsername').textContent = username;
-            document.getElementById('deleteForm').action = '/admin/delete_user/' + userId;
-            document.getElementById('deleteModal').style.display = 'flex';
-        }
-
-        function closeDeleteModal() {
-            document.getElementById('deleteModal').style.display = 'none';
-        }
-
-        // 點擊模態框外部關閉
-        document.getElementById('deleteModal').addEventListener('click', function(e) {
-            if (e.target === this) {
-                closeDeleteModal();
-            }
-        });
-    </script>
-</body>
-</html>
-- 
2.40.1

